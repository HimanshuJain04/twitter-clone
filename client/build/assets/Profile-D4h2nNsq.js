import{G as Z,R as E,r as h,b as ee,j as t,e as re,u as ae,i as ce,M as he,k as de,l as fe,m as pe,n as ue,_,o as me}from"./index-D89wP-Bh.js";import{R as xe,P as R,A as ge,g as ve}from"./Post-erxX0t-N.js";import{P as L}from"./PostSkeleton-DfL_M9xe.js";import{S as we}from"./Spinner-CwWOvF2s.js";import{g as J,b as je,c as be,d as ye}from"./postService-Bo15xWdl.js";import"./index-Dkj-mLi3.js";import"./CircularProgress-9x59cZ3H.js";import"./index-C8XlQNJy.js";function Ne(r){return Z({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 6h2v2h-2zM8 6h2v2h-2zM11 6h2v2h-2zM2 12h2v2h-2zM5 12h2v2h-2zM8 12h2v2h-2zM5 9h2v2h-2zM8 9h2v2h-2zM11 9h2v2h-2zM2 9h2v2h-2zM13 0v1h-2v-1h-7v1h-2v-1h-2v16h15v-16h-2zM14 15h-13v-11h13v11z"},child:[]}]})(r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var C=function(r,o){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var l in e)e.hasOwnProperty(l)&&(i[l]=e[l])},C(r,o)};function Se(r,o){C(r,o);function i(){this.constructor=r}r.prototype=o===null?Object.create(o):(i.prototype=o.prototype,new i)}var j=function(){return j=Object.assign||function(o){for(var i,e=1,l=arguments.length;e<l;e++){i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(o[a]=i[a])}return o},j.apply(this,arguments)};function Ee(r,o,i,e){var l,a=!1,f=0;function u(){l&&clearTimeout(l)}function b(){u(),a=!0}typeof o!="boolean"&&(e=i,i=o,o=void 0);function s(){var m=this,y=Date.now()-f,D=arguments;if(a)return;function w(){f=Date.now(),i.apply(m,D)}function x(){l=void 0}e&&!l&&w(),u(),e===void 0&&y>r?w():o!==!0&&(l=setTimeout(e?x:w,e===void 0?r-y:r))}return s.cancel=b,s}var v={Pixel:"Pixel",Percent:"Percent"},K={unit:v.Percent,value:.8};function Q(r){return typeof r=="number"?{unit:v.Percent,value:r*100}:typeof r=="string"?r.match(/^(\d*(\.\d+)?)px$/)?{unit:v.Pixel,value:parseFloat(r)}:r.match(/^(\d*(\.\d+)?)%$/)?{unit:v.Percent,value:parseFloat(r)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),K):(console.warn("scrollThreshold should be string or number"),K)}var _e=function(r){Se(o,r);function o(i){var e=r.call(this,i)||this;return e.lastScrollTop=0,e.actionTriggered=!1,e.startY=0,e.currentY=0,e.dragging=!1,e.maxPullDownDistance=0,e.getScrollableTarget=function(){return e.props.scrollableTarget instanceof HTMLElement?e.props.scrollableTarget:typeof e.props.scrollableTarget=="string"?document.getElementById(e.props.scrollableTarget):(e.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},e.onStart=function(l){e.lastScrollTop||(e.dragging=!0,l instanceof MouseEvent?e.startY=l.pageY:l instanceof TouchEvent&&(e.startY=l.touches[0].pageY),e.currentY=e.startY,e._infScroll&&(e._infScroll.style.willChange="transform",e._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},e.onMove=function(l){e.dragging&&(l instanceof MouseEvent?e.currentY=l.pageY:l instanceof TouchEvent&&(e.currentY=l.touches[0].pageY),!(e.currentY<e.startY)&&(e.currentY-e.startY>=Number(e.props.pullDownToRefreshThreshold)&&e.setState({pullToRefreshThresholdBreached:!0}),!(e.currentY-e.startY>e.maxPullDownDistance*1.5)&&e._infScroll&&(e._infScroll.style.overflow="visible",e._infScroll.style.transform="translate3d(0px, "+(e.currentY-e.startY)+"px, 0px)")))},e.onEnd=function(){e.startY=0,e.currentY=0,e.dragging=!1,e.state.pullToRefreshThresholdBreached&&(e.props.refreshFunction&&e.props.refreshFunction(),e.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){e._infScroll&&(e._infScroll.style.overflow="auto",e._infScroll.style.transform="none",e._infScroll.style.willChange="unset")})},e.onScrollListener=function(l){typeof e.props.onScroll=="function"&&setTimeout(function(){return e.props.onScroll&&e.props.onScroll(l)},0);var a=e.props.height||e._scrollableNode?l.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!e.actionTriggered){var f=e.props.inverse?e.isElementAtTop(a,e.props.scrollThreshold):e.isElementAtBottom(a,e.props.scrollThreshold);f&&e.props.hasMore&&(e.actionTriggered=!0,e.setState({showLoader:!0}),e.props.next&&e.props.next()),e.lastScrollTop=a.scrollTop}},e.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:i.dataLength},e.throttledOnScrollListener=Ee(150,e.onScrollListener).bind(e),e.onStart=e.onStart.bind(e),e.onMove=e.onMove.bind(e),e.onEnd=e.onEnd.bind(e),e}return o.prototype.componentDidMount=function(){if(typeof this.props.dataLength>"u")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},o.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},o.prototype.componentDidUpdate=function(i){this.props.dataLength!==i.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},o.getDerivedStateFromProps=function(i,e){var l=i.dataLength!==e.prevDataLength;return l?j(j({},e),{prevDataLength:i.dataLength}):null},o.prototype.isElementAtTop=function(i,e){e===void 0&&(e=.8);var l=i===document.body||i===document.documentElement?window.screen.availHeight:i.clientHeight,a=Q(e);return a.unit===v.Pixel?i.scrollTop<=a.value+l-i.scrollHeight+1:i.scrollTop<=a.value/100+l-i.scrollHeight+1},o.prototype.isElementAtBottom=function(i,e){e===void 0&&(e=.8);var l=i===document.body||i===document.documentElement?window.screen.availHeight:i.clientHeight,a=Q(e);return a.unit===v.Pixel?i.scrollTop+l>=i.scrollHeight-a.value:i.scrollTop+l>=a.value/100*i.scrollHeight},o.prototype.render=function(){var i=this,e=j({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),l=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),a=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return E.createElement("div",{style:a,className:"infinite-scroll-component__outerdiv"},E.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(f){return i._infScroll=f},style:e},this.props.pullDownToRefresh&&E.createElement("div",{style:{position:"relative"},ref:function(f){return i._pullDown=f}},E.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!l&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},o}(h.Component);function Le(r){return Z({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M272 64h-16c-4.4 0-8 3.6-8 8v72c0 4.4 7.6 8 12 8h12c4.4 0 8-3.6 8-8V72c0-4.4-3.6-8-8-8z"},child:[]},{tag:"path",attr:{d:"M433.9 130.1L382 78.2c-9-9-21.3-14.2-34.1-14.2h-28c-8.8 0-16 7.3-16 16.2v80c0 8.8-7.2 16-16 16H160c-8.8 0-16-7.2-16-16v-80c0-8.8-7.2-16.2-16-16.2H96c-17.6 0-32 14.4-32 32v320c0 17.6 14.4 32 32 32h320c17.6 0 32-14.4 32-32V164c0-12.7-5.1-24.9-14.1-33.9zM322 400.1c0 8.8-8 16-17.8 16H143.8c-9.8 0-17.8-7.2-17.8-16v-96c0-8.8 8-16 17.8-16h160.4c9.8 0 17.8 7.2 17.8 16v96z"},child:[]}]})(r)}const De=({title:r,accounts:o,setShowFollowers:i})=>{const e=ee();return t.jsx("div",{children:t.jsx("div",{className:"fixed flex justify-center items-center w-screen left-0 top-0 z-50 bg-black/[0.6] h-screen",children:t.jsxs("div",{className:"flex relative min-h-[300px] min-w-[300px] bg-[#2f2c2c] gap-1 rounded-md p-5 flex-col justify-start items-start",children:[t.jsx("span",{onClick:()=>i(null),className:" text-white right-2 absolute top-2 cursor-pointer text-2xl",children:t.jsx(xe,{})}),t.jsx("div",{className:"w-full border-b-2 pb-3 border-white/[0.3]",children:t.jsx("p",{className:"text-white text-center font-bold text-2xl",children:r})}),t.jsx("div",{className:"flex w-full pt-3 flex-col gap-2 text-white ",children:(o==null?void 0:o.length)>0?o.map(l=>t.jsxs("div",{className:"flex cursor-pointer hover:bg-white/[0.1] transition-all duration-300 ease-in-out rounded-full p-1 w-full justify-start items-center gap-3",children:[t.jsx("div",{children:t.jsx("img",{src:l.profileImg,alt:l.userName,className:"h-12 w-12 rounded-full object-cover"})}),t.jsxs("div",{onClick:()=>{i(null),e(`/profile/${l.userName}`)},className:"flex flex-col text-sm overflow-hidden text-white/[0.8] justify-normal items-start",children:[t.jsx("p",{className:"font-bold",children:l.fullName}),t.jsxs("p",{children:["@",l.userName]})]})]},l._id)):t.jsx("div",{children:"No user found"})})]})})})},Te=()=>t.jsx("div",{className:"w-full justify-center  items-start flex",children:t.jsx("div",{className:"w-full mt-10 mb-20 text-white text-3xl font-bold text-center",children:"Highlights"})}),ke=({parentPost:r,commentPost:o})=>t.jsxs("div",{className:"w-full bg-white/[0.09]",children:[t.jsx(R,{post:r}),t.jsx(R,{post:o})]}),X=[{title:"Posts"},{title:"Replies"},{title:"Highlights"},{title:"Media"},{title:"Likes"}],ze=()=>{var z,I,O,B,A,$,V,G,W,q;const r=ee(),{pathname:o}=re(),i=h.useRef(null),e=o.split("/").at(-1),l=ae(n=>n.auth.user),[a,f]=h.useState(X[0]),[u,b]=h.useState([]),[s,m]=h.useState(null),[y,D]=h.useState(0),[w,x]=h.useState(!1),[te,N]=h.useState(!1),[se,T]=h.useState(!0),[le,F]=h.useState(0),[p,S]=h.useState(),[k,M]=h.useState(!1),[H,P]=h.useState("");h.useEffect(()=>{F(0),b([]),T(!0),Y(0)},[a,o]);const Y=n=>{if(a.title==="Highlights")return;x(!0);let c;switch(a.title){case"Posts":c=J;break;case"Replies":c=ye;break;case"Media":c=be;break;case"Likes":c=je;break;default:c=J;break}c(e,n).then(({data:d})=>{var g;b(oe=>[...oe,...d.data]),F(n+1),((g=d==null?void 0:d.data)==null?void 0:g.length)===10?T(!0):T(!1)}).catch(d=>console.log(d)).finally(()=>x(!1))};function U(n){var c,d;l._id!==(n==null?void 0:n._id)&&((c=n.followers)!=null&&c.find(g=>g._id===l._id)?P("Following"):(d=n.following)!=null&&d.find(g=>g._id===l._id)?P("Follow Back"):P("Follow"))}const ie=async()=>{x(!0),await ue(s._id).then(({data:n})=>{_.success(n.isFollow?"Follow":"Unfollow"),U(n.data.updatedUser),m(n.data.updatedUser)}).catch(n=>{_.error("Something went wrong"),console.log("ERROR: ",n)}).finally(()=>x(!1))};async function ne(){N(!0);const n=new FormData;n.append("post",p,p==null?void 0:p.name),await me(n).then(({data:c})=>{m(c.data),S(c.data.additionalDetails.coverImg),_.success("Cover image updated")}).catch(c=>{_.error("Cover image update failed"),console.log("Error: ",c)}).finally(()=>N(!1))}return h.useEffect(()=>{N(!0),ce(e).then(({data:n})=>{var c,d;m(n.data.existedUser),D(n.data.postLength),S((d=(c=n.data.existedUser)==null?void 0:c.additionalDetails)==null?void 0:d.coverImg),U(n.data.existedUser)}).catch(n=>{m(null),console.log("Error: ",n)}).finally(()=>N(!1))},[o]),t.jsx("div",{className:"w-full",children:te?t.jsx(we,{}):t.jsxs("div",{className:"w-full relative justify-start items-start flex flex-col bg-black h-screen overflow-auto",children:[k&&t.jsx("div",{children:t.jsx(De,{title:k,setShowFollowers:M,accounts:k==="Following"?s.following:s.followers})}),t.jsxs("div",{className:"flex z-10 sticky top-0 flex-row p-2 gap-5 backdrop-blur-lg justify-start w-full items-center",children:[t.jsx("span",{onClick:()=>r(-1),className:"text-white text-2xl cursor-pointer px-2 py-1 rounded-full hover:bg-[white]/[0.1]",children:t.jsx(he,{})}),t.jsxs("div",{className:"flex flex-col justify-start items-start",children:[t.jsx("p",{className:"text-white font-bold text-lg",children:s==null?void 0:s.fullName}),t.jsxs("p",{className:"text-white/[0.4] text-sm font-semibold",children:[y," posts"]})]})]}),t.jsxs("div",{className:"w-full flex flex-col gap-3 relative",children:[t.jsxs("div",{className:" relative group overflow-hidden bg-white/[0.5] h-[200px] w-full",children:[p&&t.jsx("img",{src:typeof p=="string"||p instanceof String?p:URL.createObjectURL(p),className:"w-full h-auto object-cover",alt:"cover-Img"}),(l==null?void 0:l._id)===(s==null?void 0:s._id)&&t.jsxs(t.Fragment,{children:[t.jsx("input",{onChange:n=>S(n.target.files[0]),ref:i,type:"file",hidden:!0}),t.jsx("div",{onClick:()=>i.current.click(),className:"w-full opacity-0 cursor-pointer h-full bg-black -bottom-[100px] flex text-center justify-center items-center text-5xl transition-all duration-700 ease-in-out text-white  group-hover:bottom-0 group-hover:opacity-60 object-cover absolute z-0  ",children:t.jsx(ge,{})}),p!==((z=s==null?void 0:s.additionalDetails)==null?void 0:z.coverImg)&&t.jsxs("div",{className:"absolute flex justify-center items-center gap-4 top-3 right-5  transition-all duration-300 text-2xl ease-in-out font-bold px-5 py-2 rounded-lg  text-white z-10",children:[t.jsx("span",{onClick:()=>{S(s.additionalDetails.coverImg)},className:" bg-black/[0.5]  rounded-full p-3  transition-all duration-300 ease-in-out cursor-pointer hover:bg-black/[0.2] ",children:t.jsx(de,{})}),t.jsx("span",{onClick:ne,className:" bg-black/[0.5]  rounded-full p-3  transition-all duration-300 ease-in-out cursor-pointer hover:bg-black/[0.2] ",children:t.jsx(Le,{})})]})]})]}),t.jsx("div",{className:"sm:w-[170px] w-[150px] h-[150px] left-3 sm:left-8 -bottom-[40px] absolute sm:h-[170px]",children:t.jsx("img",{src:s==null?void 0:s.profileImg,alt:"profileImg",className:"rounded-full w-full h-full border-[5px] border-black "})}),(l==null?void 0:l._id)===(s==null?void 0:s._id)?t.jsx("div",{onClick:()=>r(`/edit-profile/${s.userName}`),className:"w-full flex justify-end px-5",children:t.jsx("button",{className:"font-bold  text-[white] text-sm hover:bg-[white]/[0.12] transition-all duration-300 ease-in-out rounded-full px-10 py-2 border-[1px] border-[white]/[0.7]",children:"Edit profile"})}):t.jsx(t.Fragment,{children:t.jsx("div",{className:"w-full flex justify-end px-2",children:t.jsx("button",{onClick:ie,className:"text-white transition-all duration-200 ease-in-out border-[1px] font-bold  py-2 px-7 sm:px-10 rounded-full  "+(H==="Following"?"bg-black border-white/[0.7] hover:bg-[white]/[0.1]":" bg-blue-400 border-blue-400 hover:bg-blue-300"),children:H})})})]}),t.jsxs("div",{className:"flex text-white mt-14 w-full gap-3 px-5 justify-start items-start flex-col",children:[t.jsxs("div",{className:"flex flex-col gap-0",children:[t.jsx("p",{className:"font-bold text-[20px]  ",children:s==null?void 0:s.fullName}),t.jsxs("p",{className:"text-[white]/[0.5] font-light",children:["@",s==null?void 0:s.userName]})]}),((I=s==null?void 0:s.additionalDetails)==null?void 0:I.bio)&&t.jsx("div",{children:t.jsx("p",{className:"text-lg",children:(O=s==null?void 0:s.additionalDetails)==null?void 0:O.bio})}),t.jsxs("div",{className:"flex gap-3 text-[15px] font-light text-[white]/[0.5]",children:[((B=s==null?void 0:s.additionalDetails)==null?void 0:B.city)&&t.jsxs("span",{className:"flex gap-2 justify-center items-center",children:[t.jsx(fe,{className:"text-xl"}),t.jsx("p",{children:(A=s==null?void 0:s.additionalDetails)==null?void 0:A.city})]}),t.jsxs("span",{className:"flex gap-2 justify-center items-center",children:[t.jsx(Ne,{}),t.jsxs("p",{children:["Joined ",ve(s==null?void 0:s.createdAt)]})]})]}),(($=s==null?void 0:s.additionalDetails)==null?void 0:$.link)&&t.jsx("div",{className:"text-[15px] font-light text-[white]/[0.5]",children:t.jsxs("span",{className:"flex gap-2 justify-center items-center",children:[t.jsx(pe,{className:"text-xl"}),t.jsx("a",{target:"_blank",href:(V=s==null?void 0:s.additionalDetails)==null?void 0:V.link,className:"hover:underline text-blue-400",children:(G=s==null?void 0:s.additionalDetails)==null?void 0:G.link})]})}),t.jsxs("div",{className:"flex justify-center items-center font-light gap-5",children:[t.jsxs("div",{onClick:()=>M("Following"),className:" cursor-pointer flex gap-1 text-white justify-center items-center",children:[t.jsx("span",{className:"font-semibold",children:(W=s==null?void 0:s.following)==null?void 0:W.length}),t.jsx("p",{className:"text-[white]/[0.5] text-[15px]",children:"Following"})]}),t.jsxs("div",{onClick:()=>M("Followers"),className:" cursor-pointer flex gap-1 text-white justify-center items-center",children:[t.jsx("span",{className:"font-semibold",children:(q=s==null?void 0:s.followers)==null?void 0:q.length}),t.jsx("p",{className:"text-[white]/[0.5] text-[15px]",children:"Followers"})]})]})]}),t.jsx("div",{className:"flex mt-5 w-full justify-between items-center",children:X.map((n,c)=>t.jsxs("div",{onClick:()=>f(n),className:" transition-all flex flex-col pt-4 duration-300 ease-in-out cursor-pointer hover:bg-[white]/[0.1] gap-2 px-2 w-full justify-between items-center",children:[t.jsx("span",{className:` transition-all px-1 text-[15px] duration-300 ease-in-out ${a.title===n.title?"text-white font-semibold ":"text-[white]/[0.4]"}`,children:n.title}),t.jsx("span",{className:` bg-blue-400 transition-all duration-300 ease-in-out h-1 w-full rounded-full ${a.title===n.title?"opacity-100":" opacity-0"}`})]},n+c))}),t.jsx("div",{className:"w-full mt-7 mb-2 text-white",children:w?t.jsxs("div",{className:"flex gap-2 flex-col justify-center items-start",children:[t.jsx(L,{}),t.jsx(L,{}),t.jsx(L,{}),t.jsx(L,{})]}):u.length>0?t.jsx(t.Fragment,{children:t.jsx(_e,{dataLength:u.length,next:()=>Y(le),hasMore:se,children:t.jsx("div",{className:"flex flex-col gap-5 justify-start ",children:u.map((n,c)=>t.jsx("div",{children:a.title==="Replies"?t.jsx(t.Fragment,{children:t.jsx(ke,{parentPost:n.parentPost,commentPost:n.comment})}):t.jsx(R,{post:n})},(n==null?void 0:n._id)+""+c))})})}):a.title==="Highlights"?t.jsx(Te,{}):t.jsx("div",{className:"w-full mt-10 mb-20",children:t.jsx("p",{className:"text-3xl font-bold text-center",children:"No post found"})})})]})})};export{ze as default};
