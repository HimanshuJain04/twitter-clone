import{r as c,e as x,b as O,j as e,v as T,_ as o,f as P}from"./index-D89wP-Bh.js";import{u as S}from"./index.esm-DBPxmGmj.js";import{S as E}from"./Spinner-CwWOvF2s.js";import"./CircularProgress-9x59cZ3H.js";const C=()=>{const{register:p,handleSubmit:h}=S(),[i,g]=c.useState(30),{pathname:b}=x(),d=x(),m=O(),{email:l,from:j}=d.state;console.log(d.state);const w=["","","","",""],[y,n]=c.useState(!1);c.useEffect(()=>{setTimeout(()=>{r(i-1)},1e3)},[b]);function r(t){t>=0&&(g(t),setTimeout(()=>{r(t-1)},1e3))}const v=async t=>{n(!0);const s=Object.values(t).join("");await T({otp:s,email:l}).then(()=>{o.success("Otp verified successfully!"),j==="SIGNUP"?m("/auth/login"):m("/auth/forgot-password-change-password",{state:l})}).catch(a=>{var u,f;o.error((f=(u=a==null?void 0:a.response)==null?void 0:u.data)==null?void 0:f.message)}).finally(()=>{n(!1)})};async function N(){n(!0),await P(l).then(()=>{o.success("Otp resend!"),r(30)}).catch(t=>{var s,a;o.error((a=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:a.message)}).finally(()=>{n(!1)})}return e.jsx(e.Fragment,{children:y?e.jsx(E,{}):e.jsx("div",{className:"h-screen overflow-auto w-full bg-black flex justify-center items-center",children:e.jsxs("div",{className:"flex flex-col bg-[white]/[0.09] shadow-lg shadow-[white]/[0.2] p-4 sm:px-10 py-10 sm:py-20 rounded-lg justify-center items-center gap-14",children:[e.jsxs("div",{className:"flex flex-col justify-center items-center gap-5",children:[e.jsx("p",{className:"text-white text-4xl font-bold",children:"Verify OTP"}),e.jsx("p",{className:"text-[white]/[0.5] min-w-[200px] max-w-[350px] sm:max-w-[500px] text-center font-semibold text-base",children:"To verify your OTP (One-Time-Password), Please enter 5 digits otp code that has been sent to your email address."})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex  flex-col justify-center items-center gap-16",children:[e.jsx("form",{className:"flex flex-row gap-5 md:gap-10 justify-center items-center",children:w.map((t,s)=>e.jsx("input",{type:"text",maxLength:1,minLength:1,name:`otp${s}`,...p(`otp${s}`,{required:"Enter Valid OTP",pattern:{value:/^[0-9]+$/,mesage:"Enter Valid OTP"}}),className:" h-10 w-10 sm:w-14 p-2 sm:p-5 sm:h-14 transition-all duration-300 ease-in-out focus-within:border-blue-500 border-2 border-black text-white bg-[black] text-xl font-bold rounded-lg outline-none "},s))}),e.jsxs("div",{className:"w-full flex flex-col-reverse gap-5 sm:flex-row justify-between items-center",children:[e.jsx("div",{children:i>0?e.jsxs("p",{className:" text-sm font-semibold text-blue-500",children:["Send otp after:  ",e.jsx("span",{children:i})]}):e.jsx("button",{onClick:N,className:"text-base font-semibold text-blue-500 hover:underline transition-all duration-300 ease-in-out",children:"Resend OTP"})}),e.jsx("button",{onClick:h(v),className:"text-white bg-blue-500 hover:bg-blue-600 transition-all duration-300 ease-in-out rounded-lg px-20 py-3 font-bold text-lg",children:"Verify"})]})]})})]})})})};export{C as default};
