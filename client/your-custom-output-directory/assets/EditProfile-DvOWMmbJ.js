import{G as M,r as o,b as L,e as A,a as H,j as a,p as T,q as _,t as $,w as q,y as V,z as J,i as K,_ as I,A as Q,B as W}from"./index-D89wP-Bh.js";import{G as X,B as Y}from"./index-C8XlQNJy.js";import{S as Z}from"./Spinner-CwWOvF2s.js";import"./CircularProgress-9x59cZ3H.js";function ee(l){return M({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.364 6.635c-1.561-1.559-4.1-1.559-5.658 0l-4.534 4.535c-.473.473-.733 1.1-.733 1.77 0 .668.261 1.295.732 1.768.487.486 1.128.73 1.769.73.64 0 1.279-.242 1.767-.73l2.122-2.121c.391-.395.586-.904.586-1.414 0-.512-.195-1.023-.586-1.414l-3.536 3.535c-.193.195-.511.195-.708-.002-.127-.127-.146-.275-.146-.352 0-.078.019-.227.146-.354l4.535-4.537c.778-.779 2.048-.779 2.83 0 .779.779.779 2.049 0 2.828l-4.537 4.537-2.535 2.535c-.779.779-2.049.779-2.828 0-.78-.779-.78-2.049 0-2.828l.095-.096c-.451-.6-.702-1.359-.702-2.125l-.807.807c-1.56 1.559-1.56 4.098 0 5.656.779.779 1.804 1.17 2.828 1.17s2.049-.391 2.828-1.17l7.072-7.072c1.56-1.559 1.56-4.096 0-5.656z"},child:[]}]})(l)}function te(l){return M({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 5c1.609 0 3.12.614 4.254 1.73 1.126 1.107 1.746 2.579 1.746 4.14s-.62 3.03-1.745 4.139l-4.255 4.184-4.254-4.186c-1.125-1.107-1.745-2.576-1.745-4.139s.62-3.032 1.745-4.141c1.135-1.113 2.647-1.727 4.254-1.727m0-2c-2.047 0-4.096.768-5.657 2.305-3.124 3.074-3.124 8.057 0 11.131l5.657 5.563 5.657-5.565c3.124-3.072 3.124-8.056 0-11.129-1.561-1.537-3.609-2.305-5.657-2.305zM12 8.499c.668 0 1.296.26 1.768.731.976.976.976 2.562 0 3.537-.473.472-1.1.731-1.768.731s-1.295-.26-1.768-.731c-.976-.976-.976-2.562 0-3.537.473-.471 1.101-.731 1.768-.731m0-1c-.896 0-1.792.342-2.475 1.024-1.367 1.367-1.367 3.584 0 4.951.684.684 1.578 1.024 2.475 1.024s1.792-.342 2.475-1.024c1.366-1.367 1.366-3.584 0-4.951-.683-.683-1.579-1.024-2.475-1.024z"},child:[]}]})(l)}const ae=[{name:"fullName",placeholder:"Enter your full name",type:"text",isReadOnly:!1,icon:a.jsx(_,{})},{name:"userName",placeholder:"Enter your user name",type:"text",isReadOnly:!0,icon:a.jsx($,{})},{name:"email",placeholder:"Enter your email address",type:"email",isReadOnly:!0,icon:a.jsx(q,{})},{name:"city",placeholder:"Enter your city",type:"text",isReadOnly:!1,icon:a.jsx(te,{})},{name:"link",placeholder:"Enter your link",type:"text",isReadOnly:!1,icon:a.jsx(ee,{})},{name:"dob",placeholder:"Enter your date of birth",type:"date",isReadOnly:!1,icon:a.jsx(V,{})},{name:"gender",placeholder:"Enter your gender",type:"select",isReadOnly:!1,icon:a.jsx(X,{})},{name:"phoneNo",placeholder:"Enter your phone number",type:"text",isReadOnly:!1,icon:a.jsx(J,{})},{name:"bio",placeholder:"Enter your bio",type:"textarea",isReadOnly:!1,icon:a.jsx(Y,{})}],re=()=>{const[l,r]=o.useState(!1),d=o.useRef(null),C=L(),{pathname:S}=A(),P=H(),[s,c]=o.useState({userName:"",fullName:"",email:"",profileImg:"",gender:"",bio:"",phoneNo:"",dob:"",link:"",city:""}),[z,B]=o.useState(null);async function F(){r(!0);const e=S.split("/").at(-1);await K(e).then(({data:t})=>{var i,n,p,u,x,h,f,g,y,b,j,N,U,w,v,D,O,R,E,k;B({userName:(i=t.data.existedUser)==null?void 0:i.userName,fullName:(n=t.data.existedUser)==null?void 0:n.fullName,email:(p=t.data.existedUser)==null?void 0:p.email,profileImg:(u=t.data.existedUser)==null?void 0:u.profileImg,gender:(x=t.data.existedUser)==null?void 0:x.additionalDetails.gender,bio:(h=t.data.existedUser)==null?void 0:h.additionalDetails.bio,phoneNo:(f=t.data.existedUser)==null?void 0:f.additionalDetails.phoneNo,dob:(g=t.data.existedUser)==null?void 0:g.additionalDetails.dob,link:(y=t.data.existedUser)==null?void 0:y.additionalDetails.link,city:(b=t.data.existedUser)==null?void 0:b.additionalDetails.city}),c({userName:(j=t.data.existedUser)==null?void 0:j.userName,fullName:(N=t.data.existedUser)==null?void 0:N.fullName,email:(U=t.data.existedUser)==null?void 0:U.email,profileImg:(w=t.data.existedUser)==null?void 0:w.profileImg,gender:(v=t.data.existedUser)==null?void 0:v.additionalDetails.gender,bio:(D=t.data.existedUser)==null?void 0:D.additionalDetails.bio,phoneNo:(O=t.data.existedUser)==null?void 0:O.additionalDetails.phoneNo,dob:(R=t.data.existedUser)==null?void 0:R.additionalDetails.dob,link:(E=t.data.existedUser)==null?void 0:E.additionalDetails.link,city:(k=t.data.existedUser)==null?void 0:k.additionalDetails.city})}).catch(t=>{console.log("Error: ",t)}).finally(()=>{r(!1)})}async function G(){r(!0);const e={};if(Object.entries(s).forEach(([i,n])=>{z[i]!==n&&n!==null&&(e[i]=n)}),Object.entries(e).length===0){I.error("Make changes to update profile"),r(!1);return}const t=new FormData;Object.entries(e).forEach(([i,n])=>{t.append(i,n)}),await Q(t).then(()=>{P(W()),I.success("Pofile updated!"),C(`/profile/${s.userName}`)}).catch(i=>{console.log("ERROR : ",i)}).finally(()=>{r(!1)})}function m(e){c({...s,[e.target.name]:e.target.value})}return o.useEffect(()=>{F()},[]),a.jsx("div",{className:"w-full",children:l?a.jsx(Z,{}):a.jsxs("div",{className:"w-full overflow-y-auto pb-20 p-10 gap-16 h-screen flex flex-col items-center ",children:[a.jsxs("div",{onClick:()=>d.current.click(),className:"w-[200px] relative flex cursor-pointer group justify-center items-center overflow-hidden shrink-0 h-[200px] rounded-full bg-gray-600",children:[a.jsx("img",{src:typeof s.profileImg=="string"||s.profileImg instanceof String?s.profileImg:URL.createObjectURL(s.profileImg),alt:"profile-image",className:" w-full h-full object-cover"}),a.jsx("input",{name:"profileImg",type:"file",onChange:e=>c({...s,[e.target.name]:e.target.files[0]}),hidden:!0,ref:d}),a.jsx("div",{className:"w-full opacity-0 h-full bg-black -bottom-[200px] flex text-center justify-center items-center text-5xl transition-all duration-700 ease-in-out text-white  group-hover:bottom-0 group-hover:opacity-80 object-cover absolute z-[5]  ",children:a.jsx(T,{})})]}),a.jsx("div",{className:"flex justify-start items-center flex-col gap-7",children:ae.map((e,t)=>a.jsxs("div",{className:" bg-[white]/[0.1] pl-3 text-white rounded-lg flex justify-center transition-all duration-300 ease-in-out focus-within:border-blue-400 border-[2px] border-[white]/[0.05] gap-1 items-center shadow-md",children:[a.jsx("label",{htmlFor:e.name,className:"text-white pr-2 border-r-2 border-white/[0.4] text-3xl",children:e.icon}),e.name==="bio"?a.jsx("textarea",{name:e.name,value:s[e.name],id:e.name,onChange:m,placeholder:e.placeholder,className:"outline-none placeholder:text-gray-400 resize-none min-h-[150px] w-[250px] sm:w-[350px] p-3 text-white  bg-transparent text-lg font-semibold"}):a.jsx("input",{type:e.type,name:e.name,value:s[e.name],id:e.name,onChange:m,readOnly:e.isReadOnly,placeholder:e.placeholder,className:`outline-none placeholder:text-gray-400 w-[250px] sm:w-[350px] p-3 ${e.isReadOnly?"text-white opacity-70":"text-white"}  bg-transparent text-lg font-semibold`})]},e.name+t))}),a.jsx("div",{children:a.jsx("button",{className:"bg-blue-400 text-white font-semibold py-3 text-lg px-10 rounded-md ",onClick:G,children:"Update Changes"})})]})})};export{re as default};
